---
title: "transtataR"
output: 
  github_document:
    df_print: kable
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

StataユーザーのためのRパッケージです。

- 作成者：[土井翔平](https://shohei-doi.github.io/)
- 連絡先：[shohei.doi0504@gmail.com](shohei.doi0504@gmail.com)

開発者はStataユーザーではないので、バグや要望を報告していただけると幸いです。

## インストール

`{devtools}`などを使ってGitHubからインストールをしてください。

```{r, eval=FALSE}
devtools::install_github("shohei-doi/transtataR")
```

- `{devtools}`をインストールしていない人は、まずこちらからインストールしてください。

```{r, eval=FALSE}
install.packages("devtools")
```


## 基本的な使い方

まずはパッケージを読み込みます。

```{r}
library(transtataR)
```

`stata2r()`という関数にStataのコードを入れて実行できます。
現在、対応しているStataのコマンドは以下の通りです。

- `pwd`
- `cd`
- `use`
- `browse`
- `sum`
- `reg`

### 具体例

例として[Tableau Public](https://public.tableau.com/s/resources)のSample Dataから[Titanic Passenger List](https://public.tableau.com/s/sites/default/files/media/titanic%20passenger%20list.csv)をダウンロードして、適当な場所に保存をします。

このようにしてStataのコマンド`use`でデータを読み込むことができます。

```{r}
stata2r("use data/titanic passenger list.csv")
```

現在、対応しているファイル形式は以下の通りです。

- `.csv`
- `.tsv`
- `.xls[x]`
- `.dta`

ちなみに、読み込んだデータはR上では`temp`で保存されています。

```{r}
stata2r("sum")
```

```{r}
stata2r("reg survived sex age")
```

## 発展的な使い方

### ワークフロー

`stata2r()`はStataのコマンドをRコードに変換して実行をしていますが、実はStataコマンドと同じ名前の関数を定義しています。
例えば、回帰分析を行う際には`reg()`を内部で呼び出しています。
なので、明示的に`reg()`を呼び出すことも可能です。

```{r}
reg("survived sex age")
```


## 動作環境

```{r}
sessionInfo()
```

